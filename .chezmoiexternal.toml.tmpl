{{- $altArch := "" }}
{{- if eq .chezmoi.arch "amd64" }}
    {{ $altArch = "x86_64" }}
{{- else if eq .chezmoi.arch "arm64" }}
    {{ $altArch = "aarch64" }}
{{ end -}}

{{- $fontDir := "" -}}
{{- if eq .chezmoi.os "darwin" }}
    {{ $fontDir = "Library/Fonts" }}
{{ else if eq .chezmoi.os "linux" }}
    {{ $fontDir = ".local/share/fonts" }}
{{ end -}}

[".emacs.d"]
    type = "git-repo"
    url = "https://github.com/16levels/minimal-emacs.d"
    refreshPeriod = "168h"

[".config/nvim"]
    type = "git-repo"
    url = "https://github.com/16levels/kickstart-modular.nvim"
    refreshPeriod = "168h"

[".vim/pack/completion/start/auto-pairs"]
    type = "git-repo"
    url = "https://github.com/jiangmiao/auto-pairs"
    refreshPeriod = "168h"

[".vim/pack/colorscheme/start/catppuccin"]
    type = "git-repo"
    url = "https://github.com/catppuccin/vim"
    refreshPeriod = "168h"

[".vim/pack/interface/start/lightline"]
    type = "git-repo"
    url = "https://github.com/itchyny/lightline.vim"
    refreshPeriod = "168h"

[".vim/pack/utility/start/vim-sleuth"]
    type = "git-repo"
    url = "https://github.com/tpope/vim-sleuth"
    refreshPeriod = "168h"

[".config/bat/themes/Catppuccin Frappe.tmTheme"]
    type = "file"
    url = "https://github.com/catppuccin/bat/raw/main/themes/Catppuccin%20Frappe.tmTheme"

[".config/bat/themes/Catppuccin Latte.tmTheme"]
    type = "file"
    url = "https://github.com/catppuccin/bat/raw/main/themes/Catppuccin%20Latte.tmTheme"

["{{ $fontDir }}/Iosevka.ttc"]
    type = "archive-file"
    url = {{ gitHubLatestReleaseAssetURL "be5invis/Iosevka" "SuperTTC-Iosevka-*.zip" | quote }}
    path = "Iosevka.ttc"

["{{ $fontDir }}/IosevkaAile.ttc"]
    type = "archive-file"
    url = {{ gitHubLatestReleaseAssetURL "be5invis/Iosevka" "SuperTTC-IosevkaAile-*.zip" | quote }}
    path = "IosevkaAile.ttc"

["{{ $fontDir }}/IosevkaTermNerdFont-Regular.ttf"]
    type = "archive-file"
    path = "IosevkaTermNerdFont-Regular.ttf"
    url = {{ gitHubLatestReleaseAssetURL "ryanoasis/nerd-fonts" "IosevkaTerm.tar.xz" | quote }}
    refreshPeriod = "168h"
    exact = true
    stripComponents = 0

{{ if eq .chezmoi.os "linux" -}}
[".local/bin/umoci"]
    type = "file"
    executable = true
    refreshPeriod = "168h"
    url = {{ gitHubLatestReleaseAssetURL "opencontainers/umoci" (printf "umoci.linux.%s" $.chezmoi.arch) | quote }}

[".local/bin/zellij"]
    type = "archive-file"
    path = "zellij"
    executable = true
    refreshPeriod = "168h"
    url = {{ gitHubLatestReleaseAssetURL "zellij-org/zellij" (printf "zellij-no-web-%s-unknown-linux-musl.tar.gz" $altArch) | quote }}

[".local/bin/fd"]
    type = "archive-file"
    path = "fd"
    executable = true
    stripComponents = 1
    refreshPeriod = "168h"
    url = {{ gitHubLatestReleaseAssetURL "sharkdp/fd" (printf "fd-v*-%s-unknown-linux-musl.tar.gz" $altArch) | quote }}

[".local/bin/rg"]
    type = "archive-file"
    path = "rg"
    executable = true
    stripComponents = 1
    refreshPeriod = "168h"
    url = {{ gitHubLatestReleaseAssetURL "BurntSushi/ripgrep" (printf "ripgrep-*-%s-unknown-linux-*.tar.gz" $altArch) | quote }}
{{ end }}

{{- if and (eq .chezmoi.os "linux") (eq .chezmoi.osRelease.id "fedora") }}
[".local/bin/starship"]
    type = "archive-file"
    path = "starship"
    executable = true
    refreshPeriod = "168h"
    url = {{ gitHubLatestReleaseAssetURL "starship/starship" (printf "starship-%s-unknown-linux-musl.tar.gz" $altArch) | quote }}

[".local/share/icons/hicolor/scalable/apps/ptyxis.svg"]
    type = "file"
    url = "https://gitlab.gnome.org/chergert/ptyxis/-/raw/main/data/icons/ptyxis.svg"
{{ end }}

{{- if and (eq .chezmoi.os "linux") (eq .chezmoi.osRelease.id "debian") }}
{{ $fripperymoveclockVersion := "48.0" }}
[".local/share/gnome-shell/extensions/Move_Clock@rmy.pobox.com/"] 
    include = [".local/share/gnome-shell/extensions/Move_Clock@rmy.pobox.com/*"] 
    type = "archive"
    url = "https://frippery.org/extensions/gnome-shell-frippery-{{ $fripperymoveclockVersion }}.tgz"
    exact = true
    stripComponents =  5
{{ end -}}
